<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Hanna Math Game</title>

<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: linear-gradient(to bottom right, #ffecd2, #fcb69f);
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}

.container {
    max-width: 480px;
    margin: 20px auto;
    background: white;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    position: relative;
}

.hanna {
    width: 257px;
    margin-right: -20px;
    margin-bottom: -19px;
}

.question {
    font-size: 27px;
    margin: -125px 0 15px 0;
    font-weight: bold;
    color: white;
}

.input-box {
    font-size: 28px;
    padding: 10px;
    width: 150px;
    border-radius: 10px;
    border: 2px solid #444;
    text-align: center;
    margin-top: 96px;
}

.result {
    font-size: 28px;
    margin-top: 10px;
    min-height: 40px;
}

.emoji {
    font-size: 40px;
    margin-top: 10px;
    min-height: 50px;
}

.score {
    font-size: 20px;
    font-weight: bold;
    color: #008cff;
    margin-top: 10px;
}

.streak {
    font-size: 18px;
    color: #ff6600;
    font-weight: bold;
}

.nextgame-btn {
    margin-top: 20px;
    padding: 15px 25px;
    background: #008cff;
    color: white;
    border: none;
    font-size: 20px;
    border-radius: 12px;
    cursor: pointer;
    font-weight: bold;
}

/* üéâ Celebration */
.celebration{
  margin-top:12px;
  min-height:36px;
  pointer-events:none;
  text-align:center;
}

/* üéä Confetti Canvas */
#confetti-canvas{
  position:fixed;
  left:0;
  top:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:9999;
}

/* ‚≠ê Floating Stars */
.star{
  display:inline-block;
  font-size:22px;
  opacity:0;
  transform:translateY(8px) scale(0.8);
  animation:floatStar 2200ms ease-out forwards;
}
@keyframes floatStar{
  0% { opacity:0; transform:translateY(12px) scale(.6); }
  60% { opacity:1; transform:translateY(-6px) scale(1.05); }
  100% { opacity:0; transform:translateY(-30px) scale(.9); }
}

/* üåà Rainbow Flash */
.flash {
    animation: rainbowFlash 600ms;
}
@keyframes rainbowFlash {
    0% { background:#fff; }
    20% { background:#ff0000; }
    40% { background:#ffcc00; }
    60% { background:#00ff00; }
    80% { background:#00ccff; }
    100% { background:#fff; }
}

/* üéµ Music Button */
.music-btn {
    margin-top: 10px;
    padding: 10px 15px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    background: #ff7b00;
    color: white;
    cursor: pointer;
}
</style>
</head>
<body>

<canvas id="confetti-canvas"></canvas>

<div class="container" id="gameBox">

    <img src="hanna.jpeg" class="hanna" />

    <div id="question" class="question">Loading...</div>

    <input type="number" id="answerInput" class="input-box" placeholder="Answer" />

    <div id="result" class="result"></div>
    <div id="emoji" class="emoji"></div>

    <div class="score">Score: <span id="score">0</span></div>
    <div class="streak">Streak: <span id="streak">0</span> üî•</div>

    <div class="celebration" id="celebration"></div>

    <button class="music-btn" onclick="toggleMusic()">üéµ Music: Off</button>

    <button class="nextgame-btn" onclick="goNextGame()">Next Game</button>

</div>

<!-- üîä Sounds -->
<audio id="correctSound" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="wrongSound" src="https://assets.mixkit.co/active_storage/sfx/2037/2037-preview.mp3"></audio>
<audio id="bgMusic" loop src="https://assets.mixkit.co/active_storage/sfx/318/318-preview.mp3"></audio>

<script>
let num1, num2, correctAnswer;
let score = 0;
let streak = 0;
let musicOn = false;

function newQuestion() {
    num1 = Math.floor(Math.random() * 10) + 1;
    num2 = Math.floor(Math.random() * 10) + 1;
    correctAnswer = num1 + num2;

    document.getElementById("question").textContent = `${num1} + ${num2} = ?`;
    document.getElementById("result").textContent = "";
    document.getElementById("emoji").textContent = "";
    document.getElementById("answerInput").value = "";
}

/* ‚≠ê Stars */
function spawnStars(count=8){
  const celebration = document.getElementById('celebration');
  celebration.innerHTML = '';
  for(let i=0;i<count;i++){
    const s = document.createElement('span');
    s.className = 'star';
    s.textContent = i%2===0 ? '‚≠ê' : '‚ú®';
    s.style.animationDelay = (i*80)+'ms';
    celebration.appendChild(s);
  }
}

/* üéä Confetti */
const confetti = (function(){
  const canvas = document.getElementById('confetti-canvas');
  const ctx = canvas.getContext('2d');
  let W = canvas.width = innerWidth;
  let H = canvas.height = innerHeight;
  let particles = [];
  let running = false;

  window.addEventListener('resize', ()=>{
    W = canvas.width = innerWidth;
    H = canvas.height = innerHeight;
  });

  function rand(min,max){ return Math.random()*(max-min)+min; }

  function createParticles(count=100){
    for(let i=0;i<count;i++){
      particles.push({
        x: rand(0, W),
        y: rand(-50, 0),
        r: rand(6,12),
        color: `hsl(${Math.floor(rand(0,360))}, 80%, 60%)`,
        vx: rand(-1,1),
        vy: rand(3,7),
        life: rand(200,350)
      });
    }
  }

  function render(){
    ctx.clearRect(0,0,W,H);
    particles.forEach(p=>{
      ctx.fillStyle = p.color;
      ctx.fillRect(p.x, p.y, p.r, p.r);
    });
  }

  function update(){
    for(let i=particles.length-1;i>=0;i--){
      let p = particles[i];
      p.x += p.vx;
      p.y += p.vy;
      p.life--;
      if(p.y > H + 20 || p.life <= 0){
        particles.splice(i,1);
      }
    }
  }

  function loop(){
    if(!running) return;
    update();
    render();
    if(particles.length === 0){
      running = false;
      ctx.clearRect(0,0,W,H);
      return;
    }
    requestAnimationFrame(loop);
  }

  return {
    launch(count=120){
      createParticles(count);
      if(!running){
        running = true;
        loop();
      }
    }
  };
})();

function launchConfetti(){
  confetti.launch(150);
}

/* üéµ Music Toggle */
function toggleMusic(){
  const music = document.getElementById("bgMusic");
  const btn = document.querySelector(".music-btn");
  if(!musicOn){
    music.play();
    musicOn = true;
    btn.textContent = "üéµ Music: On";
  } else {
    music.pause();
    musicOn = false;
    btn.textContent = "üéµ Music: Off";
  }
}

/* ‚úÖ Answer Check */
document.getElementById("answerInput").addEventListener("input", function () {
    let userAns = Number(this.value);

    if (userAns === correctAnswer) {
        document.getElementById("result").style.color = "green";
        document.getElementById("result").textContent = "Correct ‚úî";
        document.getElementById("emoji").textContent = "üòäüéâ‚≠ê";
        document.getElementById("correctSound").play();

        score++;
        streak++;

        document.getElementById("score").textContent = score;
        document.getElementById("streak").textContent = streak;

        launchConfetti();
        spawnStars(10);

        const box = document.getElementById("gameBox");
        box.classList.add("flash");
        setTimeout(()=>box.classList.remove("flash"),600);

        setTimeout(newQuestion, 900);
    }
    else if (this.value !== "") {
        document.getElementById("result").style.color = "red";
        document.getElementById("result").textContent = "Wrong ‚úò";
        document.getElementById("emoji").textContent = "üò¢";
        document.getElementById("wrongSound").play();
        streak = 0;
        document.getElementById("streak").textContent = streak;
    }
});

function goNextGame() {
    window.location.href = "game2.html";
}

newQuestion();
</script>

</body>
</html>
